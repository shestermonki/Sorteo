<header>
  <div class="d-flex gap-2 card-name-avatar">
    @if (user()) {
      <img [src]="srcAvatar()" alt="">
      
      <div class="content-name">
        <div class="d-flex gap-3 align-items-center">
          <h2 class="m-0">
            {{ user()!.global_name }}
          </h2>
          @if ( user()!.verified ) {
            <i class="verify fa-solid fa-check"
            title="verified"></i>
          }
        </div>
        <p class="m-0">
          {{ user()!.username }}
        </p>
      </div>
    }
  </div>
</header>

<div class="contain-sorteos">
  <div class="card-sorteos h-100">
    <div class="contain-description">
      @for (sorteo of listSorteos(); track $index) {
        <div class="card-regalos">
          <div class="d-flex justify-content-between">
            <h2 class="">{{ sorteo.name }}</h2>
            <div>
              <div>Comienza el: {{ sorteo.startDate | date:'dd/MM/yyyy' }} </div>
              <div>Termina el: {{ sorteo.endDate | date:'dd/MM/yyyy' }} </div>
            </div>
          </div>
          <hr>
          <p>{{ sorteo.description }}</p>
          <div class="list-regalos">
            <h3>Regalos</h3>
            <div class="d-flex gap-5">
              <div>regalo 1</div>
              <div>regalo 2</div>
              <div>regalo 3</div>
              <div>regalo 4</div>
            </div>
          </div>
          <button (click)="participarSorteo(sorteo._id)"
          class="btn btn-primary" type="button">
            <span [class]="loadingButton().classLoading + ' spinner-grow-sm'"
              aria-hidden="true">
            </span>
            <span role="status">{{ loadingButton().message }}</span>
          </button>
        </div>
      }@empty {
        <!-- <div class=" w-100 fs-1 p-3 bg-info bg-opacity-10 border
          border-info border-start-0 border-end-0">
          No hay sorteos disponibles
        </div> -->
      }
    </div>
  </div>
</div>

@if (respRegisterSorteo()?.status === 'NOTSERVER') {
  <div class="card-invitation">
    <a href="https://discord.com/invite/pBjEVYTC7t">Ingresa a nuestro Servidor</a>
  </div>
}

<app-toast [toggleToast]="toggleToast()"
  [respRegisterSorteo]="respRegisterSorteo()"></app-toast>
<app-spinner [isLoading]="pageLoading()" />